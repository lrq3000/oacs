<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>OACS: C:/oacs/oacs/oacs/lib/debug/functionprofiler.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OACS
   </div>
   <div id="projectbrief">Server-side anti-cheat system for online games</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('functionprofiler_8py_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">functionprofiler.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="functionprofiler_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html">    1</a></span>&#160;<span class="comment">#!/usr/bin/env python</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">#</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">#</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"># TODO:</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"># - implement cProfile or yappi, or use threading.setProfile and sys.setProfile, or implement one&#39;s own multi-threaded profiler:</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"># http://code.google.com/p/yappi/</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"># http://code.activestate.com/recipes/465831-profiling-threads/</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"># http://effbot.org/librarybook/sys.htm</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">#</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">#</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"># CHANGELOG:</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"># 2012-11-12 - v0.5.0 - lrq3000</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">#   * cleaned the functions a bit and added a no timeout mode</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"># 2010-09-22 - v0.4.3 - lrq3000</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">#   * added error handling if profile and pstats libraries can&#39;t be found</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"># 2010-09-17 - v0.4.2 - lrq3000</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">#   * added an automatic calibration prior to profiling</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"># 2010-09-17 - v0.4.1 - lrq3000</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">#   * fixed import bug</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"># 2010-09-16 - v0.4 - lrq3000</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">#    * fallback to profile instead of cProfile : even if this pure python implementation is much slower, it at least work with threads (cProfile, alias hotshot, is not compatible with multi-threaded applications at the moment)</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"># 2010-09-09 - v0.3 - lrq3000</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">#    * workaround for a bug with cProfile</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"># 2010-09-08 - v0.2 - lrq3000</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">#    * added the parsestats, browsegui and browsenogui functions</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">#    * centralized runprofile here</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"># 2010-09-06 - v0.1 - lrq3000</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">#    * Initial version.</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#ae17a6e3a62649a816bf354bf4762c078">   31</a></span>&#160;__author__  = <span class="stringliteral">&#39;lrq3000&#39;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#a324ac4277682c635f4dfd34a08876371">   32</a></span>&#160;__version__ = <span class="stringliteral">&#39;0.5.0&#39;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#ac71522ed4c322772f4f4450a41f2916e">   35</a></span>&#160;noprofiler = <span class="keyword">False</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keyword">import</span> profile, pstats</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keywordflow">except</span>:</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    noprofiler = <span class="keyword">True</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">import</span> sys, os</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#addfc2d969eb34c200d13d6555bdd0179">   42</a></span>&#160;pathname = os.path.dirname(sys.argv[0])</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;sys.path.append(os.path.join(pathname))</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">from</span> kthread <span class="keyword">import</span> *</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">from</span> profilebrowser <span class="keyword">import</span> *</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keyword">from</span> runsnakerun <span class="keyword">import</span> runsnake <span class="comment"># runsnakerun needs wxPython lib, if it&#39;s not available then we pass. RunSnakeRun is only used for GUI visualisation, not for profiling (and you can still use pstats for console browsing)</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keywordflow">except</span>:</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#a1d34a2ef84cba300306caaec7b9fa7f9">   53</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#a1d34a2ef84cba300306caaec7b9fa7f9">runprofile</a>(mainfunction, output, timeout = 0, calibrate=False):</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="stringliteral">    Run the functions profiler and save the result</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="stringliteral">    If timeout is greater than 0, the profile will automatically stops after timeout seconds</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">if</span> noprofiler == <span class="keyword">True</span>:</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            print(<span class="stringliteral">&#39;ERROR: profiler and/or pstats library missing ! Please install it (probably package named python-profile) before running a profiling !&#39;</span>)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment"># This is the main function for profiling</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keyword">def </span>_profile():</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        profile.run(mainfunction, output)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    print(<span class="stringliteral">&#39;=&gt; RUNNING FUNCTIONS PROFILER\n\n&#39;</span>)</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment"># Calibrate the profiler (only use this if the profiler produces some funny stuff, but calibration can also produce even more funny stuff with the latest cProfile of Python v2.7! So you should only enable calibration if necessary)</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> calibrate:</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        print(<span class="stringliteral">&#39;Calibrating the profiler...&#39;</span>)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        cval = <a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#a52e72d03222baa90a2ff668824569495">calibrateprofile</a>()</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        print(<span class="stringliteral">&#39;Calibration found value : %s&#39;</span> % cval)</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    print(<span class="stringliteral">&#39;Initializing the profiler...&#39;</span>)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment"># Run in timeout mode (if the function cannot ends by itself, this is the best mode: the function must ends for the profile to be saved)</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">if</span> timeout &gt; 0:</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        pthread = <a class="code" href="classoacs_1_1lib_1_1debug_1_1kthread_1_1_k_thread.html">KThread</a>(target=_profile) <span class="comment"># we open the function with the profiler, in a special killable thread (see below why)</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        print(<span class="stringliteral">&#39;Will now run the profiling and terminate it in %s seconds. Results will be saved in %s&#39;</span> % (str(timeout), str(output)))</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        print(<span class="stringliteral">&#39;\nCountdown:&#39;</span>)</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(0,5):</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                print(str(5-i))</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                time.sleep(1)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        print(<span class="stringliteral">&#39;0\nStarting to profile...&#39;</span>)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        pthread.start() <span class="comment"># starting the thread</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        time.sleep(float(timeout)) <span class="comment"># after this amount of seconds, the thread gets killed and the profiler will end its job</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        print(<span class="stringliteral">&#39;\n\nFinishing the profile and saving to the file %s&#39;</span> % str(output))</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        pthread.kill() <span class="comment"># we must end the main function in order for the profiler to output its results (if we didn&#39;t launch a thread and just closed the process, it would have done no result)</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment"># Run in full length mode (we run the function until it ends)</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        print(<span class="stringliteral">&quot;Running the profiler, please wait until the process terminates by itself (if you forcequit before, the profile won&#39;t be saved)&quot;</span>)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        _profile()</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    print(<span class="stringliteral">&#39;=&gt; Functions Profile done !&#39;</span>)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#a52e72d03222baa90a2ff668824569495">   91</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#a52e72d03222baa90a2ff668824569495">calibrateprofile</a>():</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="stringliteral">    Calibrate the profiler (necessary to have non negative and more exact values)</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    pr = profile.Profile()</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    calib = []</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    crepeat = 10</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(crepeat):</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            calib.append(pr.calibrate(10000))</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    final = sum(calib) / crepeat</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    profile.Profile.bias = final <span class="comment"># Apply computed bias to all Profile instances created hereafter</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">return</span> final</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#a7b8a3fe9fac915a5931e21ec919414cf">  104</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#a7b8a3fe9fac915a5931e21ec919414cf">parseprofile</a>(profilelog, out):</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="stringliteral">    Parse a profile log and print the result on screen</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    file = open(out, <span class="stringliteral">&#39;w&#39;</span>) <span class="comment"># opening the output file</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    print(<span class="stringliteral">&#39;Opening the profile in %s...&#39;</span> % profilelog)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    p = pstats.Stats(profilelog, stream=file) <span class="comment"># parsing the profile with pstats, and output everything to the file</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    print(<span class="stringliteral">&#39;Generating the stats, please wait...&#39;</span>)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    file.write(<span class="stringliteral">&quot;=== All stats:\n&quot;</span>)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    p.strip_dirs().sort_stats(-1).print_stats()</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    file.write(<span class="stringliteral">&quot;=== Cumulative time:\n&quot;</span>)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    p.sort_stats(<span class="stringliteral">&#39;cumulative&#39;</span>).print_stats(100)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    file.write(<span class="stringliteral">&quot;=== Time:\n&quot;</span>)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    p.sort_stats(<span class="stringliteral">&#39;time&#39;</span>).print_stats(100)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    file.write(<span class="stringliteral">&quot;=== Time + cumulative time:\n&quot;</span>)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    p.sort_stats(<span class="stringliteral">&#39;time&#39;</span>, <span class="stringliteral">&#39;cum&#39;</span>).print_stats(.5, <span class="stringliteral">&#39;init&#39;</span>)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    file.write(<span class="stringliteral">&quot;=== Callees:\n&quot;</span>)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    p.print_callees()</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    file.write(<span class="stringliteral">&quot;=== Callers:\n&quot;</span>)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    p.print_callers()</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">#p.print_callers(.5, &#39;init&#39;)</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">#p.add(&#39;fooprof&#39;)</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    file.close()</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    print(<span class="stringliteral">&#39;Stats generated and saved to %s.&#39;</span> % out)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    print(<span class="stringliteral">&#39;Everything is done. Exiting&#39;</span>)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#a443f0293f70e3618dc8b4ef6fa90361b">  131</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#a443f0293f70e3618dc8b4ef6fa90361b">browseprofile</a>(profilelog):</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="stringliteral">    Browse interactively a profile log in console</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    print(<span class="stringliteral">&#39;Starting the pstats profile browser...\n&#39;</span>)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            browser = <a class="code" href="classoacs_1_1lib_1_1debug_1_1profilebrowser_1_1_profile_browser.html">ProfileBrowser</a>(profilelog)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keywordflow">print</span> &gt;&gt; browser.stream, <span class="stringliteral">&quot;Welcome to the profile statistics browser. Type help to get started.&quot;</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            browser.cmdloop()</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <span class="keywordflow">print</span> &gt;&gt; browser.stream, <span class="stringliteral">&quot;Goodbye.&quot;</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">except</span> KeyboardInterrupt:</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#a49c726a34b16e7009f539cd6418cf03b">  144</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespaceoacs_1_1lib_1_1debug_1_1functionprofiler.html#a49c726a34b16e7009f539cd6418cf03b">browseprofilegui</a>(profilelog):</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="stringliteral">    Browse interactively a profile log in GUI using RunSnakeRun and SquareMap</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    app = runsnake.RunSnakeRunApp(0)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    app.OnInit(profilelog)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">#app.OnInit()</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    app.MainLoop()</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_95dea3d10c9f98c1baa90e87e0175c9f.html">oacs</a></li><li class="navelem"><a class="el" href="dir_3841315bfd9ffd1d6ca7b95fc4faf1e8.html">oacs</a></li><li class="navelem"><a class="el" href="dir_21b84646a66e1b24a785a648bc86a4ce.html">oacs</a></li><li class="navelem"><a class="el" href="dir_f4012c60f4aa39009a0bf5e65219707c.html">lib</a></li><li class="navelem"><a class="el" href="dir_d66e356242a504b5c79398ecabd69f96.html">debug</a></li><li class="navelem"><a class="el" href="functionprofiler_8py.html">functionprofiler.py</a></li>
    <li class="footer">Generated on Thu May 9 2013 17:43:10 for OACS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
